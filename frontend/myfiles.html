<!DOCTYPE html>
<html lang="en">
<head>
    <title>My File</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .nav-link {
            transition: transform 0.2s ease-in-out; /* Smooth transition */
            transform-origin: center center; /* Ensures scaling from the center */
        }

        .nav-link:hover {
            transform: scale(1.1); /* Slightly scales the link when hovered */
            color: #ff6347;  /* Optional: Change color on hover */
        }

        /* Optional: Prevent navbar from shifting on small screens */
        @media (max-width: 767px) {
            .nav-link:hover {
                transform: scale(1); /* Disable scaling on smaller screens */
            }
        }
      

        .card.custom-width {
      width: 100%;
    }


    @media (min-width: 768px) {
  .card.custom-width {
    width: 22rem;
  }
}

body {
    padding-top: 56px; /* Adjust this value based on your navbar height */
}



    </style>


</head>
<body>
    <div class="container-fluid">

        <!-- navbar -->

       <div class="row">
             <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
                <div class="container-fluid">
                  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                      <li class="nav-item">
                        <a class="nav-link active mt-3 mt-lg-0 " aria-current="page" href="./index.html"> My Home</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </nav>
           </div>


   <!-- files section -->

           <div class="container-fluid mt-5">
            <div class="row gy-3">



                <div class="col-12 col-md-6 col-lg-4">
                    <div class="card w-100 h-100">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="card-link">Card link</a>
                            <a href="#" class="card-link">Another link</a>
                        </div>
                    </div>
                </div>








                <div class="col-12 col-md-6 col-lg-4">
                    <div class="card w-100 h-100">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="card-link">Card link</a>
                            <a href="#" class="card-link">Another link</a>
                        </div>
                    </div>
                </div>







                <div class="col-12 col-md-6 col-lg-4">
                    <div class="card w-100 h-100">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="card-link">Card link</a>
                            <a href="#" class="card-link">Another link</a>
                        </div>
                    </div>
                </div>





                <div class="col-12 col-md-6 col-lg-4">
                    <div class="card w-100 h-100">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="card-link">Card link</a>
                            <a href="#" class="card-link">Another link</a>
                        </div>
                    </div>
                </div>









                <div class="col-12 col-md-6 col-lg-4">
                    <div class="card w-100 h-100">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="card-link">Card link</a>
                            <a href="#" class="card-link">Another link</a>
                        </div>
                    </div>
                </div>


                <div class="col-12 col-md-6 col-lg-4">
                    <div class="card w-100 h-100">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="card-link">Card link</a>
                            <a href="#" class="card-link">Another link</a>
                        </div>
                    </div>
                </div>

           </div>

           </div>


  <!-- pagination -->

  <div class="container-fluid mt-3 mt-md-5">


    <nav aria-label="Page navigation example">
        <ul class="pagination pagination-sm justify-content-center">
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
          </li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item active" aria-current="page">
            <a class="page-link" href="#">2</a>
          </li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item">
            <a class="page-link" href="#">Next</a>
          </li>
        </ul>
      </nav>

  </div>

  <div class="toast-container position-fixed top-0 end-0 p-3" id="codeToast">
    <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-body">
        <div class="d-flex gap-4">
          <span class="text-primary"><i class="fa-solid fa-circle-info fa-lg"></i></span>
          <div class="d-flex flex-grow-1 align-items-center">
            <span class="fw-semibold" id="toastMessage"></span>
            <button type="button" class="btn-close btn-close-sm btn-close-black ms-auto" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
        </div>
      </div>
    </div>
  </div>

    
    </div>





<script>


function generateRandomCode() {
const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
let code = '';
for (let i = 0; i < 8; i++) {
code += characters.charAt(Math.floor(Math.random() * characters.length));
}
return code;
}

// Function to show toast notification
function showToast(message) {
    Toastify({
        text: message,
        duration: 3000,
        close: true,
        gravity: "top",
        position: "right",
        offset: {
            y: 56 // Move down by navbar height
        },
        style: {
            background: "linear-gradient(to right, #00b09b, #96c93d)"
        },
    }).showToast();
}






function loadPage(page) {
/*
 const accessToken = localStorage.getItem("access_token");
    const idToken = localStorage.getItem("id_token");

fetch('/api/myfiles', {
  method: 'POST',                    // switch to POST
  headers: {
    "Content-Type": "application/json",  // tell the server itâ€™s JSON
    "Authorization": `Bearer ${accessToken}`,
    "X-Id-Token": idToken
  },
  body: JSON.stringify({             // serialize your payload
    page_no: page
  })
})
  .then(response => {
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}`);
    }
    return response.json();
  })
  .then(data => {
    renderCards(data.data);
    renderPagination(data.currentPage, data.totalPages);
  })
  .catch(error => {
    console.error('Error fetching data:', error);
  });

   */     




       const dummyResponse = {
        currentPage: page,
        totalPages: 4,
        data: [
            { title: `Item ${page}A`, subtitle: `Sub ${page}A`, description: `Description for Item ${page}A` },
            { title: `Item ${page}B`, subtitle: `Sub ${page}B`, description: `Description for Item ${page}B` },
            { title: `Item ${page}C`, subtitle: `Sub ${page}C`, description: `Description for Item ${page}C` }
        ]
    };

    renderCards(dummyResponse.data);
    renderPagination(dummyResponse.currentPage, dummyResponse.totalPages);


}

function renderCards(data) {
    const container = document.querySelector('.row.gy-3');
    let html = '';
    data.forEach(item => {
        html += `
            <div class="col-12 col-md-6 col-lg-4">
                <div class="card w-100 h-100">
                    <div class="card-body">
                        <h5 class="card-title">${item.title}</h5>
                        <h6 class="card-subtitle mb-2 text-muted">${item.subtitle}</h6>
                        <p class="card-text">${item.description}</p>
                        <button class="btn btn-primary" data-id="${item.id}">Code</button>
                    </div>
                </div>
            </div>
        `;
    });
    container.innerHTML = html;
}

function renderPagination(currentPage, totalPages) {
    const pagination = document.querySelector('.pagination');
    pagination.innerHTML = '';

    // Previous button
    const prevLi = document.createElement('li');
    prevLi.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
    const prevA = document.createElement('a');
    prevA.className = 'page-link';
    prevA.href = '#';
    prevA.textContent = 'Previous';
    if (currentPage > 1) {
        prevA.addEventListener('click', () => loadPage(currentPage - 1));
    } else {
        prevA.tabIndex = -1;
        prevA.setAttribute('aria-disabled', 'true');
    }
    prevLi.appendChild(prevA);
    pagination.appendChild(prevLi);

    // Page numbers
    for (let i = 1; i <= totalPages; i++) {
        const pageLi = document.createElement('li');
        pageLi.className = `page-item ${i === currentPage ? 'active' : ''}`;
        const pageA = document.createElement('a');
        pageA.className = 'page-link';
        pageA.href = '#';
        pageA.textContent = i;
        pageA.addEventListener('click', () => loadPage(i));
        pageLi.appendChild(pageA);
        pagination.appendChild(pageLi);
    }

    // Next button
    const nextLi = document.createElement('li');
    nextLi.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
    const nextA = document.createElement('a');
    nextA.className = 'page-link';
    nextA.href = '#';
    nextA.textContent = 'Next';
    if (currentPage < totalPages) {
        nextA.addEventListener('click', () => loadPage(currentPage + 1));
    } else {
        nextA.tabIndex = -1;
        nextA.setAttribute('aria-disabled', 'true');
    }
    nextLi.appendChild(nextA);
    pagination.appendChild(nextLi);
}








// Load page 1 when the document is ready
document.addEventListener('DOMContentLoaded', () => {
    loadPage(1);
    const container = document.querySelector('.row.gy-3');
    const toastMessage = document.getElementById('toastMessage');
    const toastElement = document.getElementById('codeToast').querySelector('.toast');
    const toast = bootstrap.Toast.getOrCreateInstance(toastElement);

    container.addEventListener('click', function(event) {
    if (event.target.tagName === 'BUTTON' && event.target.classList.contains('btn-primary')) {
        const id = event.target.dataset.id;
        if (id) {
            fetch('/api/card/getCode', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ key_id: id })
            })
            .then(response => response.json())
            .then(data => {
                const code = data.code;
                toastMessage.textContent = `Your code: ${code}`;
                toast.show();
            })
            .catch(error => {
                console.error('Error fetching code:', error);
                toastMessage.textContent = 'Failed to fetch code';
                toast.show();
            });
        }
    }
});
});

</script>




<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>




</body>
</html>